# Google Java 规范
原文 https://google.github.io/styleguide/javaguide.html
## 1 简介
本文提供完整的Google Java 代码规范，Google风格的Java代码必须严格遵循此文档。  
像其他代码规范一样，本规范包括代码美观和一些标准约定。但是，我们更关注一些确定的规则，避免给出一些不明确的建议（无论对于人还是工具）。
### 1.1 术语说明
在本文档中，除非特殊声明：
1. 术语 _类_ 包括，普通类，枚举类，接口和注解。
2. 术语 _成员_ 包括内部类，字段，方法，构造方法，即除注解以外的所有顶级内容。
3. 术语 _注释_ 通常是指实现的注解。我们一般不使用“文档注释”的说法而使用术语“Javadoc”  
其他文档说明会在文中需要的地方出现。

### 1.2 规范说明
文中示例代码是非规范的。也就是说，即使示例代码符合Google规范，但不代表这是Google唯一的规范。示例中的可选规范不应被当众强制规则。  

## 2 源文件基础
### 2.1 文件名
源文件名由源文件中区分大小写的顶级类名加`.java`后缀构成
### 2.2 编码格式：UTF-8
源文件采用UTF-8编码
### 2.3 特殊字符
#### 2.3.1 空格字符
除了行终止符外，在源文件中ASCII空格字符（0x20）是唯一可以再任何地方都可能出现的空格字符
这意味着：
1. 所有其他空格字符都是经过转义的。
2. 制表符不用于缩进。

#### 2.3.2 转义字符
对于任何有特殊意义的转义序列应当用(\b,\t,\n,\f,\r,\",\'和\\),而不是用八进制转义符(e.g.\012)或Unicode转义符(e.g.\u000a)
#### 2.3.3 非ASCII字符
对于非ASCII字符，采用Unicode字符(e.g.∞)或Unicode转义符(e.g.\u221e)。这取决于那种方式更易于理解，建议不要才有Unicode转义符，即使有注释。  
> 对于Unicode转义符，甚至是Unicode字符，注释会对其解释很有帮助。  

示例  

| Example | Discussion |
| :------------- | :------------- |
| String unitAbbrev = "μs"; | 最优解：清晰明了甚至不需要注释 |
| String unitAbbrev = "\u03bcs"; // "μs" | 允许：但是没必要这么做 |
| String unitAbbrev = "\u03bcs"; // 希腊字母mu，"s" | 允许：但是笨拙且易出错 |
| String unitAbbrev = "\u03bcs"; | 不建议：不易理解 |
| return '\ufeff' + content; // 字节顺序标记 | 良好：对于不会打印出的字符在需要的时候提供了注释 |

> 不要担心一些程序不能处理非ASCII字符而使得你的程序不可读，如果发生这种情况，程序将会被破坏，会有人修复的。  

## 3 源文件结构
源文件按顺序包括：
  1. 许可或版权信息（如果有的话）
  2. 包声明
  3. 导入声明
  4. 一个顶级类   

用一个空行分割每个部分。

### 3.1 许可或版权信息（如果有的话）
如果源文件中有许可或版权信息，那么它应当在这里（源文件头部）

### 3.2 包声明
包的声明是不换行的，每行的字数限制不包括包声明

### 3.3 导入声明
#### 3.3.1 不使用通配符
无论是否是静态，都不适用通配符导入引用
#### 3.3.2 不换行
导入声明是不换行的，每行的字数限制不包括导入声明
#### 3.3.3 顺序和间隔
导入遵循以下顺序：
1. 所有静态引用在单独的一块儿
2. 所有的非静态引用在单独的一块儿

如果既有静态又有非静态，有一个空行。导入声明中只有这一个空行。  
每个导入块儿中，都是按导入名字的ASCII顺序排序的。
#### 3.3.4 不引入静态类
静态导入不导入内部类，只导入普通类。

### 3.4 类声明
#### 3.4.1 只有一个顶级类
每一个顶级类都写在它的源文件中
#### 3.4.2 类中内容的顺序
类成员和初始化顺序会对代码的可读性造成影响.但是关于类成员排序的原则并没有一个统一的定论，不同的类肯能更适合不同的排序。  
每个类都用一些逻辑顺序在维护者给他人解释这个类时很重要。例如，新的方法不要按照习惯依照时间加到类的最后边，那不是逻辑顺序。
##### 3.4.2.1 重载：永远放在一起
当一个类有多个构造器或多个同名方法时，它们应该依次放在一起，中间没有其他代码，甚至是私有成员。

## 4 格式化
术语小贴士：块状构造是指类，方法或构造函数的主体。注意，根据第4.8.3.1节关于数组初始化程序的介绍，可以选择将任何数组初始化程序视为类似于块的构造。
### 4.1 大括号
#### 4.1.1 大括号用于可选的地方
大括号和if,else,for,do还有while语句一起使用，即使代码块儿为空或只有一行。
#### 4.1.2 非空块儿：K & R风格
在非空块儿和块状构造中，大括号准守Kernighan和Ritchie风格（“埃及风格”）：
* 左括号前不换行
* 左括号后换行
* 右括号前换行
* 仅在大括号终止语句或终止方法，构造函数或命名类的主体时，才在右括号后换行。例如，如果大括号后跟着else或逗号，则没有换行符。

例如：
``` Java
return () -> {
  while (condition()) {
    method();
  }
};

return new MyClass() {
  @Override public void method() {
    if (condition()) {
      try {
        something();
      } catch (ProblemException e) {
        recover();
      }
    } else if (otherCondition()) {
      somethingElse();
    } else {
      lastThing();
    }
  }
};
```
枚举类有一些例外情况，在4.8.1枚举

#### 4.1.3 空块儿：可以简介一些
一个空的块或构造块儿可以按K&R风格（就像4.1.2那样）也可以把左右括号紧挨着，中间没有字符或空行，除非这时多个块中的一部分（一个直观的例子就是代码块儿：if/else或try/catch/finally）。  
例如：
``` Java
// 这时被允许的
void doNothing() {}

// 这也是被允许的
void doNothingElse() {
}

// 这是不允许的：在多块儿代码中不是简洁代码
try {
  doSomething();
} catch (Exception e) {}
```
### 4.2 块儿缩进：两个空格
每个新块儿或块状构造中，都要缩进两个空格。当块结束时，缩进返回到原来的状态。缩进适用于代码和注释。（参见4.1.2，非空代码块儿：K&R风格）
### 4.3 每句代码占一行
每句代码后面跟一个换行符。
### 4.4 每行字数限制：100
Java代码限制每行最多100个字符。一个字符就是任意的一个Unicode单元，除非另有说明，任何超过限制的代码都应该换行，就像4.5换行解释的那样。
